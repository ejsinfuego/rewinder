import{r as c,j as e,q as T,d as g,y as u,a as _}from"./app-CVhW-gru.js";import{A as k}from"./AuthenticatedLayout-x173Cbiz.js";import{b as d}from"./createLucideIcon-BwL9dAhj.js";import{S as P,a as C,b as M,c as E,d as I,e as Y,s as p,P as G,f as H,g as V}from"./popover-CTcdlTpF.js";import{d as S}from"./dayjs.min-C1kBwWEK.js";import{b as B,B as f}from"./search-CzSwzNEt.js";import"./transition-Dr6P-aSD.js";import"./index-oTpBS1TV.js";import"./index-BRHHDsZm.js";import"./Combination-CJ1H4Rop.js";import"./index-BlS_j5cn.js";const b=c.forwardRef(({className:l,...a},i)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:i,className:d("w-full caption-bottom text-sm",l),...a})}));b.displayName="Table";const N=c.forwardRef(({className:l,...a},i)=>e.jsx("thead",{ref:i,className:d("[&_tr]:border-b",l),...a}));N.displayName="TableHeader";const v=c.forwardRef(({className:l,...a},i)=>e.jsx("tbody",{ref:i,className:d("[&_tr:last-child]:border-0",l),...a}));v.displayName="TableBody";const O=c.forwardRef(({className:l,...a},i)=>e.jsx("tfoot",{ref:i,className:d("border-t bg-slate-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-slate-800/50",l),...a}));O.displayName="TableFooter";const x=c.forwardRef(({className:l,...a},i)=>e.jsx("tr",{ref:i,className:d("border-b transition-colors hover:bg-slate-100/50 data-[state=selected]:bg-slate-100 dark:hover:bg-slate-800/50 dark:data-[state=selected]:bg-slate-800",l),...a}));x.displayName="TableRow";const W=c.forwardRef(({className:l,...a},i)=>e.jsx("th",{ref:i,className:d("h-12 px-4 text-left align-middle font-medium text-slate-500 [&:has([role=checkbox])]:pr-0 dark:text-slate-400",l),...a}));W.displayName="TableHead";const r=c.forwardRef(({className:l,...a},i)=>e.jsx("td",{ref:i,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",l),...a}));r.displayName="TableCell";const L=c.forwardRef(({className:l,...a},i)=>e.jsx("caption",{ref:i,className:d("mt-4 text-sm text-slate-500 dark:text-slate-400",l),...a}));L.displayName="TableCaption";const R=({className:l,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:d("mx-auto flex w-full justify-center",l),...a});R.displayName="Pagination";const A=c.forwardRef(({className:l,...a},i)=>e.jsx("ul",{ref:i,className:d("flex flex-row items-center gap-1",l),...a}));A.displayName="PaginationContent";const D=c.forwardRef(({className:l,...a},i)=>e.jsx("li",{ref:i,className:d("",l),...a}));D.displayName="PaginationItem";const w=({className:l,isActive:a,size:i="icon",...j})=>e.jsx("a",{"aria-current":a?"page":void 0,className:d(B({variant:a?"outline":"ghost",size:i}),l),...j});w.displayName="PaginationLink";const q=({generators:l})=>{const a=T().props.role;console.log(l);const i=["Serial Number","Job Order","Rating","Result","Status","Date Created"],j=Object.values(l.data).map(s=>{var o;const t=s.diagnosis[0],n=(o=s==null?void 0:s.generator_users)==null?void 0:o.map(h=>{var y;const m=(y=s==null?void 0:s.user)==null?void 0:y.find(F=>F.id===h.user_id);return{id:h.id,name:(m==null?void 0:m.name)||"",email:(m==null?void 0:m.email)||"",status:h.status,createdAt:S(h.created_at).format("MMMM DD, YYYY H:mm:ss A")||""}});return{id:s.id,serial_number:(s==null?void 0:s.serial_number)||"",job_order:(s==null?void 0:s.job_order)||"",rating:(t==null?void 0:t.kVa)||0,result:(t==null?void 0:t.result)=="rewind"?"REWIND":"RECONDITION",createdAt:S(s==null?void 0:s.created_at).format("MMMM DD, YYYY H:mm:ss A")||"",status:(s==null?void 0:s.status)==="pending"?"For Approval":"Approved",materials:(t==null?void 0:t.materials)||"",manpower:(t==null?void 0:t.manpower)||"",action:e.jsx("a",{href:route("generator.show",s.id),children:"View"}),step1:(t==null?void 0:t.step_1)=="true"?"Passed":"Failed",step2:(t==null?void 0:t.step_2)=="true"?"Passed":"Failed",step3:(t==null?void 0:t.step_3)=="true"?"Passed":"Failed",step4:(t==null?void 0:t.step_4)=="true"?"Passed":"Fail",rotor:(t==null?void 0:t.rotor)=="false"?"Damaged":"Not Damaged",stator:(t==null?void 0:t.stator)=="false"?"Damaged":"Not Damaged",exciter:(t==null?void 0:t.exciter)=="false"?"Damaged":"Not Damaged",prediction:(t==null?void 0:t.prediction)||"",users:n||""}});return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-center mt-6 max-w-full rounded border border-2",children:e.jsxs(b,{children:[e.jsx(N,{children:e.jsx(x,{children:i.map((s,t)=>e.jsx(r,{className:"font-medium",children:s},t))})}),e.jsx(v,{children:j.map((s,t)=>e.jsxs(x,{children:[e.jsx(r,{children:s.serial_number}),e.jsx(r,{children:s.job_order}),e.jsx(r,{children:s.rating}),e.jsx(r,{children:s.result}),e.jsx(r,{children:s.status}),e.jsx(r,{children:s.createdAt}),e.jsx(r,{children:e.jsxs(P,{children:[e.jsx(C,{children:"Show"}),e.jsxs(M,{children:[e.jsxs(E,{children:[e.jsxs(I,{children:["Generator ",s.serial_number]}),e.jsx(Y,{})]}),s.result==="REWIND"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" justify-center",children:[e.jsx("h2",{className:"font-semibold text-5xl text-gray-600 text-center leading-tight",children:s.prediction}),e.jsx("h3",{className:"font-semibold text-lg text-center leading-tight",children:"Estimated Days of Rewinding Duration"})]}),e.jsxs("div",{className:"grid grid-cols-2 p-2 gap-3 m-2",children:[e.jsxs("h2",{className:"flex font-normal text-m leading-tight",children:["Rating: ",s.rating," kVa"]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Serial Number: ",s.serial_number]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 1: ",s.step1]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 2: ",s.step2]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 3: ",s.step2]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 4: ",s.step2]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Rotor: ",s.rotor]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Stator: ",s.stator]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Exciter: ",s.exciter]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Materials: ",s.materials==="true"?"Available":"Not Available"]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Manpower: ",s.manpower]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-semibold text-5xl text-gray-600 text-center leading-tight",children:s.result}),e.jsxs("div",{className:"grid grid-cols-2 p-2 gap-3 m-2",children:[e.jsxs("h2",{className:"flex font-normal text-m leading-tight",children:["Rating: ",s.rating," kVa"]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Serial Number: ",s.serial_number]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 1: ",s.step1]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 2: ",s.step2]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 3: ",s.step3]}),e.jsxs("h2",{className:" flex font-normal text-m leading-tight",children:["Step 4: ",s.step4]})]})]}),a==="admin"&&s.result==="REWIND"&&e.jsx(e.Fragment,{children:s.status==="For Approval"?e.jsx(e.Fragment,{children:e.jsx(g,{href:"approve/"+s.id,only:["generators"],as:"button",preserveState:!0,onFinish:()=>{p.success("Generator has been approved")},children:e.jsx(f,{className:"rounded-lg",variant:"default",size:"lg",children:"Approve"})})}):e.jsx(e.Fragment,{children:e.jsx(f,{onClick:()=>s.status==="For Approval"?p.loading("Generator is still for approval"):u.visit(route("generator.show",s.id)),children:s.status==="For Approval"?"Still for Aproval":"View"})})}),(a==="rewinder"||a==="client")&&s.result==="REWIND"&&e.jsx(e.Fragment,{children:e.jsx(f,{onClick:()=>s.status==="For Approval"?p.loading("Generator is still for approval"):u.visit(route("generator.show",s.id)),children:s.status==="For Approval"?"Still for Aproval":"View"})}),a==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"justify-centerp pt-2",children:e.jsx("h1",{className:"text-lg",children:"User Access"})}),e.jsx("div",{className:"flex flex-col",children:e.jsxs(b,{children:[e.jsx(N,{children:e.jsxs(x,{children:[e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Date Created"}),e.jsx(r,{children:"Status"})]})}),e.jsx(v,{children:s.users.map((n,o)=>e.jsxs(x,{children:[e.jsx(r,{children:n.name}),e.jsx(r,{children:n.createdAt}),e.jsxs(G,{children:[e.jsx(H,{children:e.jsx(r,{children:n.status})},o),e.jsx(V,{className:"w-full",children:e.jsx(f,{children:e.jsx(g,{href:"/grantAccess/"+n.id,only:["generators"],as:"button",preserveState:!0,onFinish:()=>{p.success("Access has been approved")},children:"Approve"})})})]})]},o))})]})})]})]})]})})]},t))})]})}),e.jsx("div",{className:"flex justify-center",children:l.data.length>0&&e.jsxs(w,{children:["Page ",l.current_page," of ",l.last_page]})}),e.jsx("div",{className:"flex flex-col",children:e.jsx(R,{children:e.jsx(A,{children:l.links.length>0&&l.links.map((s,t)=>e.jsx(D,{className:"cursor-pointer rounded",children:e.jsx(w,{onClick:()=>u.visit(s.url),size:"icon",className:s.active?"bg-blue-500 text-white rounded":"rounded hover:bg-gray-200 hover:text-black px-2 responsive",children:t===0?"<":t===l.links.length-1?">":s.label})},t))})})})]})},z=q;function ae({auth:l,generators:a}){return e.jsx(e.Fragment,{children:e.jsxs(k,{user:l.user,role:l.role,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(_,{title:"Dashboard"}),e.jsx("div",{className:"flex justify-center pt-3",children:e.jsx("h1",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"List of Generators"})}),e.jsx("div",{className:"flex justify-center mt-6 max-w-full border border-2",children:e.jsx(z,{user:l.user,generators:a})})]})})}export{ae as default};
